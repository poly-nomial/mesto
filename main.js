(()=>{"use strict";var t={};function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.p="";var n=function(){function t(e,n,r,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._cardId=e._id,this._ownerId=e.owner._id,this._usersLiked=e.likes,this._numberOfLikes=e.likes.length,this._templateSelector=n,this._openImagePopup=r,this._openConfirmationPopup=o,this._likeCard=i,this._dislikeCard=a}var n,r;return n=t,r=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.cloneNode(!0)}},{key:"_toggleActiveLike",value:function(t){t.target.classList.contains("place__like_active")?this._dislikeCard(this._cardId).then((function(e){t.target.classList.remove("place__like_active"),t.target.nextElementSibling.textContent=e.likes.length})).catch((function(t){return console.log(t)})):this._likeCard(this._cardId).then((function(e){t.target.classList.add("place__like_active"),t.target.nextElementSibling.textContent=e.likes.length})).catch((function(t){return console.log(t)}))}},{key:"_deleteCard",value:function(t){document.getElementById(t).innerHTML="",document.getElementById(t).remove()}},{key:"_setEventListeners",value:function(){var t=this;this._likeButton.addEventListener("click",(function(e){return t._toggleActiveLike(e)})),this._deleteButton.addEventListener("click",(function(){t._openConfirmationPopup((function(){return t._deleteCard(t._cardId)}))})),this._placepic.addEventListener("click",(function(){return t._openImagePopup(t._name,t._link)}))}},{key:"createCard",value:function(t){var e=this;return this._element=this._getTemplate(),this._place=this._element.querySelector(".place"),this._deleteButton=this._place.querySelector(".place__delete-button"),t!=this._ownerId&&this._deleteButton.remove(),this._placepic=this._element.querySelector(".place__pic"),this._likesCounter=this._element.querySelector(".place__number-of-likes"),this._placepic.setAttribute("src",this._link),this._placepic.setAttribute("alt",this._name),this._element.querySelector(".place__name").textContent=this._name,this._likeButton=this._place.querySelector(".place__like"),this._likesCounter.textContent=this._numberOfLikes,this._usersLiked.forEach((function(n){n._id===t&&e._likeButton.classList.add("place__like_active")})),this._place.setAttribute("id",this._cardId),this._setEventListeners(),this._element}}],r&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._invalidInputClass=e.invalidInputClass,this._buttonSelector=e.buttonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._activeErrorClass=e.activeErrorClass,this._formElement=n,this._buttonElement=n.querySelector(this._buttonSelector)}var e,n;return e=t,(n=[{key:"_getInputList",value:function(){return Array.from(this._formElement.querySelectorAll(this._inputSelector))}},{key:"_hasInvalidInput",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput(this._getInputList())?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled",!0))}},{key:"_showErrorMessage",value:function(t,e){var n=this._formElement.querySelector(".popup__".concat(t.id,"-error"));n.textContent=e,n.classList.add(this._activeErrorClass),t.classList.add(this._invalidInputClass)}},{key:"hideErrorMessage",value:function(t){var e=this._formElement.querySelector(".popup__".concat(t.id,"-error"));e.textContent="",e.classList.remove(this._activeErrorClass),t.classList.remove(this._invalidInputClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this.hideErrorMessage(t):this._showErrorMessage(t,t.validationMessage)}},{key:"_setEventListeners",value:function(){var t=this;this._inputList=this._getInputList(),this.toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this.button=this._popup.querySelector(".popup__save-btn")}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("click",(function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-btn"))&&t.close()}))}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=l(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},s.apply(this,arguments)}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function f(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(r);if(o){var n=h(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return f(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._photoElement=e._popup.querySelector(".popup__photo"),e._titleElement=e._popup.querySelector(".popup__photo-title"),e}return e=a,(n=[{key:"open",value:function(t,e){this._photoElement.setAttribute("src",e),this._photoElement.setAttribute("alt",t),this._titleElement.textContent=t,s(h(a.prototype),"open",this).call(this)}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(a);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=m(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},v.apply(this,arguments)}function m(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}function g(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=k(r);if(o){var n=k(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._submitFunction=e,n._popupForm=n._popup.querySelector(".popup__form"),n._inputList=Array.from(n._popup.querySelectorAll(".popup__input")),n}return e=a,(n=[{key:"getInputValues",value:function(){for(var t=[],e=0;e<this._inputList.length;e++)t[e]=this._inputList[e].value;return t}},{key:"setEventListeners",value:function(){var t=this;v(k(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){return t._submitFunction(e)}))}},{key:"close",value:function(){v(k(a.prototype),"close",this).call(this),this._popupForm.reset()}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(a);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=C(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},O.apply(this,arguments)}function C(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=I(t)););return t}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function L(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return P(t)}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=I(r);if(o){var n=I(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return L(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t)).confirmedAction=e,n._executeConfirmedAction=n.executeConfirmedAction.bind(P(n)),n}return e=a,(n=[{key:"setNewConfirmedAction",value:function(t){this.confirmedAction=t}},{key:"executeConfirmedAction",value:function(){this.confirmedAction(),this.close()}},{key:"setEventListeners",value:function(){O(I(a.prototype),"setEventListeners",this).call(this),this.button.addEventListener("click",this._executeConfirmedAction)}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(a);function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var T=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userNameElement=document.querySelector(e),this._userDescriptionElement=document.querySelector(n),this._userAvatarElement=document.querySelector(r)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._userNameElement.textContent,about:this._userDescriptionElement.textContent}}},{key:"setUserInfo",value:function(t){var e,n,r=(n=3,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1],a=r[2];this._userNameElement.textContent=o,this._userDescriptionElement.textContent=i,this._userAvatarElement.style["background-image"]="url(".concat(a,")")}}])&&R(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var B=function(){function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.items=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(){var t=this;this.items.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var M=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._token=e.headers.authorization,this._cohort="cohort-50"}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/").concat(this._cohort,"/users/me"),{headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(e){return t._getResponseData(e)}))}},{key:"getCardsFromServer",value:function(){var t=this;return fetch("https://mesto.nomoreparties.co/v1/".concat(this._cohort,"/cards"),{headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(e){return t._getResponseData(e)}))}},{key:"editUserInfo",value:function(t){var e,n,r=this,o=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return D(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return fetch("https://mesto.nomoreparties.co/v1/".concat(this._cohort,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:i,about:a})}).then((function(t){return r._getResponseData(t)}))}},{key:"postNewCard",value:function(t){var e=this;return fetch("https://mesto.nomoreparties.co/v1/".concat(this._cohort,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t.name,link:t.link})}).then((function(t){return e._getResponseData(t)}))}},{key:"likeCard",value:function(t){var e=this;return fetch("https://mesto.nomoreparties.co/v1/".concat(this._cohort,"/cards/").concat(t,"/likes"),{method:"PUT",headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(t){return e._getResponseData(t)}))}},{key:"dislikeCard",value:function(t){var e=this;return fetch("https://mesto.nomoreparties.co/v1/".concat(this._cohort,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(t){return e._getResponseData(t)}))}},{key:"updateAvatar",value:function(t){var e=this;return fetch("https://mesto.nomoreparties.co/v1/".concat(this._cohort,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then((function(t){return e._getResponseData(t)}))}},{key:"_getResponseData",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}}])&&U(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.p,t.p,t.p,t.p,t.p,t.p;var N={formSelector:".popup__form",inputSelector:".popup__input",invalidInputClass:"popup__input_invalid",buttonSelector:".popup__save-btn",inactiveButtonClass:"popup__save-btn_inactive",activeErrorClass:"popup__input-error_active"},V=document.querySelector(".popup__input_type_user-name"),z=document.querySelector(".popup__input_type_user-desc"),F=document.querySelector(".popup__input_type_place-name"),H=document.querySelector(".popup__input_type_place-link"),J=document.querySelector(".popup__input_type_avatar-link"),$=document.querySelector(".profile__edit-button"),G=document.querySelector(".profile__add-button"),K=document.querySelector(".avatar__edit-pic");function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var W,X,Y=new M({baseUrl:"https://nomoreparties.co/v1/",headers:{authorization:"85ece6ec-ad42-4595-ab64-f4ab4791389f","Content-Type":"application/json"}}),Z=new o(N,document.querySelector(".popup_type_add-place").querySelector(N.formSelector)),tt=new o(N,document.querySelector(".popup_type_edit-profile").querySelector(N.formSelector)),et=new o(N,document.querySelector(".popup_type_change-avatar").querySelector(N.formSelector)),nt=new T(".profile__user-name",".profile__user-description",".avatar"),rt=new y(".popup_type_photo-view"),ot=new w(".popup_type_edit-profile",(function(t){t.preventDefault(),ft(!0,ot.button);var e=ot.getInputValues();Y.editUserInfo(e).then((function(t){nt.setUserInfo([t.name,t.about,t.avatar]),ft(!1,ot.button),ot.close()})).catch((function(t){return console.log(t)}))})),it=new w(".popup_type_add-place",(function(t){t.preventDefault(),ft(!0,it.button);var e=it.getInputValues(),n={name:e[0],link:e[1]};Y.postNewCard(n).then((function(t){W.items=[t],W.renderItems(),ft(!1,it.button),it.close()})).catch((function(t){return console.log(t)}))})),at=new w(".popup_type_change-avatar",(function(t){t.preventDefault(),ft(!0,at.button);var e,n,r=(e=at.getInputValues(),n=1,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];Y.updateAvatar(r).then((function(t){nt.setUserInfo([t.name,t.about,t.avatar]),ft(!1,at.button),at.close()})).catch((function(t){return console.log(t)}))})),ut=new A(".popup_type_confirmation",(function(){}));Y.getUserInfo().then((function(t){nt.setUserInfo([t.name,t.about,t.avatar]),X=t._id})).then((function(){Y.getCardsFromServer().then((function(t){(W=new B({items:t,renderer:function(t){W.addItem(new n(t,"#place-template",ct,st,lt,pt).createCard(X))}},".places")).renderItems()})).catch((function(t){return console.log(t)}))})).catch((function(t){return console.log(t)})),rt.setEventListeners(),ot.setEventListeners(),it.setEventListeners(),ut.setEventListeners(),at.setEventListeners(),$.addEventListener("click",(function(){var t=nt.getUserInfo();V.value=t.name,z.value=t.about,tt.hideErrorMessage(V),tt.hideErrorMessage(z),tt.toggleButtonState(),ot.open()})),G.addEventListener("click",(function(){Z.hideErrorMessage(F),Z.hideErrorMessage(H),Z.toggleButtonState(),it.open()})),K.addEventListener("click",(function(){et.hideErrorMessage(J),et.toggleButtonState(),at.open()})),Z.enableValidation(),tt.enableValidation(),et.enableValidation();var ct=function(t,e){rt.open(t,e)},st=function(t){ut.confirmedAction=t,ut.open()},lt=function(t){return Y.likeCard(t)},pt=function(t){return Y.dislikeCard(t)};function ft(t,e){e.textContent=t?"Сохранение…":"Сохранить"}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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NEYsRUFBWTlFLE1BQ2xDbUQsR0FBMkI1RixpQkFBaUJpRixHQUM1Q1csR0FBMkI1RixpQkFBaUJrRixHQUM1Q1UsR0FBMkJ4RixvQkFDM0I0RixHQUFhd0IsTUFFaEIsSUFyQkRqQyxFQUFlcEksaUJBQWlCLFNBdUJoQyxXQUNJd0ksRUFBd0IzRixpQkFBaUJtRixHQUN6Q1EsRUFBd0IzRixpQkFBaUJvRixHQUN6Q08sRUFBd0J2RixvQkFDeEJpRyxHQUFjbUIsTUFDakIsSUEzQkRoQyxFQUFpQnJJLGlCQUFpQixTQXNDbEMsV0FDSTBJLEdBQXlCN0YsaUJBQWlCcUYsR0FDMUNRLEdBQXlCekYsb0JBQ3pCc0csR0FBZWMsTUFDbEIsSUFyQ0E3QixFQUF3QjhCLG1CQUN4QjdCLEdBQTJCNkIsbUJBQzNCNUIsR0FBeUI0QixtQkFzQjFCLElBQU1SLEdBQWlCLFNBQUM5RixFQUFXQyxHQUMvQjJFLEdBQWV5QixLQUFLckcsRUFBV0MsRUFDbEMsRUFFSzhGLEdBQXdCLFNBQUNwRixHQUMzQitFLEdBQWtCL0UsZ0JBQWtCQSxFQUNwQytFLEdBQWtCVyxNQUNyQixFQWtCS0wsR0FBVyxTQUFDMUMsR0FDZCxPQUFPaUIsRUFBSXlCLFNBQVMxQyxFQUN2QixFQUVLMkMsR0FBYyxTQUFDM0MsR0FDakIsT0FBT2lCLEVBQUkwQixZQUFZM0MsRUFDMUIsRUFHRCxTQUFTd0IsR0FBY3lCLEVBQVdDLEdBQzlCQSxFQUFjbEwsWUFBY2lMLEVBQVksY0FBZ0IsV0FDM0QsQyIsInNvdXJjZXMiOlsid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9mb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3BvcHVwLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3VzZXJJbmZvLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvYXBpLmpzIiwid2VicGFjazovLy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKGNhcmQsIHRlbXBsYXRlU2VsZWN0b3IsIG9wZW5QaG90b1BvcHVwRnVuY3Rpb24sIG9wZW5Db25maXJtYXRpb25Qb3B1cEZ1bmN0aW9uLCBsaWtlQ2FyZEZ1bmN0aW9uLCBkaXNsaWtlQ2FyZEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGNhcmQubmFtZTtcclxuICAgICAgICB0aGlzLl9saW5rID0gY2FyZC5saW5rO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJZCA9IGNhcmQuX2lkO1xyXG4gICAgICAgIHRoaXMuX293bmVySWQgPSBjYXJkLm93bmVyLl9pZDtcclxuICAgICAgICB0aGlzLl91c2Vyc0xpa2VkID0gY2FyZC5saWtlcztcclxuICAgICAgICB0aGlzLl9udW1iZXJPZkxpa2VzID0gY2FyZC5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fb3BlbkltYWdlUG9wdXAgPSBvcGVuUGhvdG9Qb3B1cEZ1bmN0aW9uO1xyXG4gICAgICAgIHRoaXMuX29wZW5Db25maXJtYXRpb25Qb3B1cCA9IG9wZW5Db25maXJtYXRpb25Qb3B1cEZ1bmN0aW9uO1xyXG4gICAgICAgIHRoaXMuX2xpa2VDYXJkID0gbGlrZUNhcmRGdW5jdGlvbjtcclxuICAgICAgICB0aGlzLl9kaXNsaWtlQ2FyZCA9IGRpc2xpa2VDYXJkRnVuY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgX3RvZ2dsZUFjdGl2ZUxpa2UoZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwbGFjZV9fbGlrZV9hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kaXNsaWtlQ2FyZCh0aGlzLl9jYXJkSWQpXHJcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3BsYWNlX19saWtlX2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgZXZ0LnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpa2VDYXJkKHRoaXMuX2NhcmRJZClcclxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmFkZCgncGxhY2VfX2xpa2VfYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBldnQudGFyZ2V0Lm5leHRFbGVtZW50U2libGluZy50ZXh0Q29udGVudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9kZWxldGVDYXJkKGlkKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5yZW1vdmUoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB0aGlzLl90b2dnbGVBY3RpdmVMaWtlKGV2dCkpO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gKCkgPT4gdGhpcy5fZGVsZXRlQ2FyZCh0aGlzLl9jYXJkSWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9vcGVuQ29uZmlybWF0aW9uUG9wdXAoYWN0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9wbGFjZXBpYy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX29wZW5JbWFnZVBvcHVwKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspKVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUNhcmQodXNlcklkKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fcGxhY2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZScpO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX3BsYWNlLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fZGVsZXRlLWJ1dHRvbicpO1xyXG4gICAgICAgIGlmICh1c2VySWQgIT0gdGhpcy5fb3duZXJJZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24ucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3BsYWNlcGljID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX3BpYycpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VzQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBsYWNlX19udW1iZXItb2YtbGlrZXMnKTtcclxuICAgICAgICB0aGlzLl9wbGFjZXBpYy5zZXRBdHRyaWJ1dGUoJ3NyYycsIHRoaXMuX2xpbmspO1xyXG4gICAgICAgIHRoaXMuX3BsYWNlcGljLnNldEF0dHJpYnV0ZSgnYWx0JywgdGhpcy5fbmFtZSk7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX25hbWUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX3BsYWNlLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fbGlrZScpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VzQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX251bWJlck9mTGlrZXM7XHJcbiAgICAgICAgdGhpcy5fdXNlcnNMaWtlZC5mb3JFYWNoKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAodXNlci5faWQgPT09IHVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwbGFjZV9fbGlrZV9hY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5fcGxhY2Uuc2V0QXR0cmlidXRlKCdpZCcsIHRoaXMuX2NhcmRJZCk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBmb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9ycywgZm9ybUVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZWxlY3RvcnMuZm9ybVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZWxlY3RvcnMuaW5wdXRTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9pbnZhbGlkSW5wdXRDbGFzcyA9IHNlbGVjdG9ycy5pbnZhbGlkSW5wdXRDbGFzcztcclxuICAgICAgICB0aGlzLl9idXR0b25TZWxlY3RvciA9IHNlbGVjdG9ycy5idXR0b25TZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2VsZWN0b3JzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5fYWN0aXZlRXJyb3JDbGFzcyA9IHNlbGVjdG9ycy5hY3RpdmVFcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fYnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dExpc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgICAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoZWxlbSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhZWxlbS52YWxpZGl0eS52YWxpZDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgICAgICBpZih0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5fZ2V0SW5wdXRMaXN0KCkpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3Nob3dFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAucG9wdXBfXyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9hY3RpdmVFcnJvckNsYXNzKTtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnZhbGlkSW5wdXRDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZUVycm9yTWVzc2FnZShpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAucG9wdXBfXyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2FjdGl2ZUVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2ludmFsaWRJbnB1dENsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZUVycm9yTWVzc2FnZShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZ2V0SW5wdXRMaXN0KCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGVsZW0gPT4ge1xyXG4gICAgICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGVsZW0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBldnQgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5idXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUtYnRuJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH07XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICgoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwJykpIHx8IChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ0bicpKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSApO1xyXG4gICAgfTtcclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vcG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9waG90b0VsZW1lbnQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3Bob3RvJyk7XHJcbiAgICAgICAgdGhpcy5fdGl0bGVFbGVtZW50ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19waG90by10aXRsZScpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4ocGhvdG9OYW1lLCBwaG90b0xpbmspIHtcclxuICAgICAgICB0aGlzLl9waG90b0VsZW1lbnQuc2V0QXR0cmlidXRlKCdzcmMnLCBwaG90b0xpbmspO1xyXG4gICAgICAgIHRoaXMuX3Bob3RvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FsdCcsIHBob3RvTmFtZSk7XHJcbiAgICAgICAgdGhpcy5fdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gcGhvdG9OYW1lO1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vcG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0RnVuY3Rpb24pIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRGdW5jdGlvbiA9IHN1Ym1pdEZ1bmN0aW9uO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpKTtcclxuICAgIH07XHJcblxyXG4gICAgZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2lucHV0TGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpbnB1dFZhbHVlc1tpXSA9IHRoaXMuX2lucHV0TGlzdFtpXS52YWx1ZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICAgIH07XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4gdGhpcy5fc3VibWl0RnVuY3Rpb24oZXZ0KSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICB9O1xyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9wb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGNvbmZpcm1lZEFjdGlvbikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuY29uZmlybWVkQWN0aW9uID0gY29uZmlybWVkQWN0aW9uO1xyXG4gICAgICAgIHRoaXMuX2V4ZWN1dGVDb25maXJtZWRBY3Rpb24gPSB0aGlzLmV4ZWN1dGVDb25maXJtZWRBY3Rpb24uYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXROZXdDb25maXJtZWRBY3Rpb24oYWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5jb25maXJtZWRBY3Rpb24gPSBhY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgZXhlY3V0ZUNvbmZpcm1lZEFjdGlvbigpIHtcclxuICAgICAgICB0aGlzLmNvbmZpcm1lZEFjdGlvbigpO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fZXhlY3V0ZUNvbmZpcm1lZEFjdGlvbik7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IodXNlck5hbWVTZWxlY3RvciwgdXNlckRlc2NyaXB0aW9uU2VsZWN0b3IsIHVzZXJBdmF0YXJTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3VzZXJOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckRlc2NyaXB0aW9uU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJBdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgfTtcclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICBjb25zdCB1c2VySW5mbyA9IHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBhYm91dDogdGhpcy5fdXNlckRlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gdXNlckluZm87XHJcbiAgICB9O1xyXG5cclxuICAgIHNldFVzZXJJbmZvKFt1c2VyTmFtZSwgdXNlckRlc2NyaXB0aW9uLCB1c2VyQXZhdGFyTGlua10pIHtcclxuICAgICAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyTmFtZTtcclxuICAgICAgICB0aGlzLl91c2VyRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gdXNlckRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHRoaXMuX3VzZXJBdmF0YXJFbGVtZW50LnN0eWxlW2BiYWNrZ3JvdW5kLWltYWdlYF0gPSBgdXJsKCR7dXNlckF2YXRhckxpbmt9KWA7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZW5kZXJJdGVtcygpIHtcclxuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XHJcbiAgICAgICAgdGhpcy5fdG9rZW4gPSBvcHRpb25zLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcclxuICAgICAgICB0aGlzLl9jb2hvcnQgPSBcImNvaG9ydC01MFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9LyR7dGhpcy5fY29ob3J0fS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgJ2F1dGhvcml6YXRpb24nOiB0aGlzLl90b2tlbixcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FyZHNGcm9tU2VydmVyKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxLyR7dGhpcy5fY29ob3J0fS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgJ2F1dGhvcml6YXRpb24nOiB0aGlzLl90b2tlbixcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZWRpdFVzZXJJbmZvKFtuZXdVc2VyTmFtZSwgbmV3VXNlckRlc2NyaXB0aW9uXSkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxLyR7dGhpcy5fY29ob3J0fS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnYXV0aG9yaXphdGlvbic6IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBuZXdVc2VyTmFtZSxcclxuICAgICAgICAgICAgICAgIGFib3V0OiBuZXdVc2VyRGVzY3JpcHRpb25cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICBwb3N0TmV3Q2FyZChuZXdDYXJkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGBodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvJHt0aGlzLl9jb2hvcnR9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgJ2F1dGhvcml6YXRpb24nOiB0aGlzLl90b2tlbixcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogbmV3Q2FyZC5uYW1lLFxyXG4gICAgICAgICAgICAgICAgbGluazogbmV3Q2FyZC5saW5rXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYGh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS8ke3RoaXMuX2NvaG9ydH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnYXV0aG9yaXphdGlvbic6IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBkaXNsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYGh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS8ke3RoaXMuX2NvaG9ydH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnYXV0aG9yaXphdGlvbic6IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVBdmF0YXIobmV3QXZhdGFyTGluaykge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxLyR7dGhpcy5fY29ob3J0fS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgJ2F1dGhvcml6YXRpb24nOiB0aGlzLl90b2tlbixcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgYXZhdGFyOiBuZXdBdmF0YXJMaW5rXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0UmVzcG9uc2VEYXRhKHJlcykge1xyXG4gICAgICAgIGlmICghcmVzLm9rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgbG9uZG9uSW1hZ2UgZnJvbSBcIi4uL2ltYWdlcy9wbGFjZXMvbG9uZG9uLmpwZ1wiO1xyXG5pbXBvcnQgcGFyaXNJbWFnZSBmcm9tIFwiLi4vaW1hZ2VzL3BsYWNlcy9wYXJpcy5qcGdcIjtcclxuaW1wb3J0IHByYWd1ZUltYWdlIGZyb20gXCIuLi9pbWFnZXMvcGxhY2VzL3ByYWd1ZS5qcGdcIjtcclxuaW1wb3J0IHN0cGV0ZXJzYnVyZ0ltYWdlIGZyb20gXCIuLi9pbWFnZXMvcGxhY2VzL3N0LXBldGVyc2J1dGcuanBnXCI7XHJcbmltcG9ydCB0b2tpb0ltYWdlIGZyb20gXCIuLi9pbWFnZXMvcGxhY2VzL3Rva2lvLmpwZ1wiO1xyXG5pbXBvcnQgdmFuY291dmVySW1hZ2UgZnJvbSBcIi4uL2ltYWdlcy9wbGFjZXMvdmFuY291dmVyLmpwZ1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAn0JvQvtC90LTQvtC9JyxcclxuICAgICAgICBsaW5rOiBsb25kb25JbWFnZVxyXG4gICAgfSxcclxuXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9Cf0LDRgNC40LYnLFxyXG4gICAgICAgIGxpbms6IHBhcmlzSW1hZ2VcclxuICAgIH0sXHJcblxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICfQn9GA0LDQs9CwJyxcclxuICAgICAgICBsaW5rOiBwcmFndWVJbWFnZVxyXG4gICAgfSxcclxuXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9Ch0LDQvdC60YIt0J/QtdGC0LXRgNCx0YPRgNCzJyxcclxuICAgICAgICBsaW5rOiBzdHBldGVyc2J1cmdJbWFnZVxyXG4gICAgfSxcclxuXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9Ci0L7QutC40L4nLFxyXG4gICAgICAgIGxpbms6IHRva2lvSW1hZ2VcclxuICAgIH0sXHJcblxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICfQktCw0L3QutGD0LLQtdGAJyxcclxuICAgICAgICBsaW5rOiB2YW5jb3V2ZXJJbWFnZVxyXG4gICAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gICAgaW52YWxpZElucHV0Q2xhc3M6ICdwb3B1cF9faW5wdXRfaW52YWxpZCcsXHJcbiAgICBidXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc2F2ZS1idG4nLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogICdwb3B1cF9fc2F2ZS1idG5faW5hY3RpdmUnLFxyXG4gICAgYWN0aXZlRXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdXNlck5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV91c2VyLW5hbWUnKTtcclxuZXhwb3J0IGNvbnN0IHVzZXJEZXNjSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfdXNlci1kZXNjJyk7XHJcbmV4cG9ydCBjb25zdCBwbGFjZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9wbGFjZS1uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBwbGFjZUxpbmtJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9wbGFjZS1saW5rJyk7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfYXZhdGFyLWxpbmsnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgcGhvdG9BZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdmF0YXJfX2VkaXQtcGljJyk7XHJcblxyXG5leHBvcnQgY29uc3QgdG9rZW4gPSBcIjg1ZWNlNmVjLWFkNDItNDU5NS1hYjY0LWY0YWI0NzkxMzg5ZlwiOyIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBmb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL3BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9wb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aENvbmZpcm1hdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL3BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuLi9jb21wb25lbnRzL3VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9zZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7IEFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL2FwaS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gICAgc2VsZWN0b3JzLFxyXG4gICAgdXNlck5hbWVJbnB1dCxcclxuICAgIHVzZXJEZXNjSW5wdXQsXHJcbiAgICBwbGFjZU5hbWVJbnB1dCxcclxuICAgIHBsYWNlTGlua0lucHV0LFxyXG4gICAgYXZhdGFyTGlua0lucHV0LFxyXG4gICAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgICBwaG90b0FkZEJ1dHRvbixcclxuICAgIGF2YXRhckVkaXRCdXR0b24sXHJcbiAgICB0b2tlblxyXG4gICAgXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gICAgYmFzZVVybDogJ2h0dHBzOi8vbm9tb3JlcGFydGllcy5jby92MS8nLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAgICdhdXRob3JpemF0aW9uJzogdG9rZW4sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgIH1cclxufSlcclxuXHJcbmNvbnN0IHBvcHVwQWRkUGxhY2VWYWxpZGF0aW9uID0gbmV3IGZvcm1WYWxpZGF0b3Ioc2VsZWN0b3JzLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9hZGQtcGxhY2UnKS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5mb3JtU2VsZWN0b3IpKTtcclxuXHJcbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGVWYWxpZGF0aW9uID0gbmV3IGZvcm1WYWxpZGF0b3Ioc2VsZWN0b3JzLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGUnKS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5mb3JtU2VsZWN0b3IpKTtcclxuXHJcbmNvbnN0IHBvcHVwTmV3QXZhdGFyVmFsaWRhdGlvbiA9IG5ldyBmb3JtVmFsaWRhdG9yKHNlbGVjdG9ycywgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfY2hhbmdlLWF2YXRhcicpLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmZvcm1TZWxlY3RvcikpO1xyXG5cclxuY29uc3QgdXNlclByb2ZpbGUgPSBuZXcgVXNlckluZm8oJy5wcm9maWxlX191c2VyLW5hbWUnLCAnLnByb2ZpbGVfX3VzZXItZGVzY3JpcHRpb24nLCAnLmF2YXRhcicpO1xyXG5cclxuY29uc3QgcGhvdG9WaWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX3Bob3RvLXZpZXcnKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGUnLCAoZXZ0KSA9PiB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgcHJvZmlsZVBvcHVwLmJ1dHRvbik7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHByb2ZpbGVQb3B1cC5nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgYXBpLmVkaXRVc2VySW5mbyhpbnB1dFZhbHVlcylcclxuICAgICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgdXNlclByb2ZpbGUuc2V0VXNlckluZm8oW2RhdGEubmFtZSwgZGF0YS5hYm91dCwgZGF0YS5hdmF0YXJdKTtcclxuICAgICAgICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgcHJvZmlsZVBvcHVwLmJ1dHRvbik7XHJcbiAgICAgICAgICAgIHByb2ZpbGVQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxufSk7XHJcblxyXG5jb25zdCBuZXdQbGFjZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2FkZC1wbGFjZScsIChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgcmVuZGVyTG9hZGluZyh0cnVlLCBuZXdQbGFjZVBvcHVwLmJ1dHRvbik7XHJcbiAgICBjb25zdCBuZXdQbGFjZUlucHV0cyA9IG5ld1BsYWNlUG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgIGNvbnN0IGFkZGVkQ2FyZCA9IHtcclxuICAgICAgICBuYW1lOiBuZXdQbGFjZUlucHV0c1swXSxcclxuICAgICAgICBsaW5rOiBuZXdQbGFjZUlucHV0c1sxXSxcclxuICAgICAgICB9O1xyXG4gICAgYXBpLnBvc3ROZXdDYXJkKGFkZGVkQ2FyZClcclxuICAgICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgY2FyZFNlY3Rpb24uaXRlbXMgPSBbZGF0YV07XHJcbiAgICAgICAgICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgICAgICAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIG5ld1BsYWNlUG9wdXAuYnV0dG9uKTtcclxuICAgICAgICAgICAgbmV3UGxhY2VQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxufSk7XHJcblxyXG5jb25zdCBuZXdBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9jaGFuZ2UtYXZhdGFyJywgKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICByZW5kZXJMb2FkaW5nKHRydWUsIG5ld0F2YXRhclBvcHVwLmJ1dHRvbik7XHJcbiAgICBjb25zdCBbbmV3TGlua10gPSBuZXdBdmF0YXJQb3B1cC5nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgYXBpLnVwZGF0ZUF2YXRhcihuZXdMaW5rKVxyXG4gICAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICB1c2VyUHJvZmlsZS5zZXRVc2VySW5mbyhbZGF0YS5uYW1lLCBkYXRhLmFib3V0LCBkYXRhLmF2YXRhcl0pO1xyXG4gICAgICAgICAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBuZXdBdmF0YXJQb3B1cC5idXR0b24pO1xyXG4gICAgICAgICAgICBuZXdBdmF0YXJQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxufSlcclxuXHJcbmNvbnN0IGNvbmZpcm1hdGlvblBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbignLnBvcHVwX3R5cGVfY29uZmlybWF0aW9uJywgKCkgPT4ge30pO1xyXG5cclxubGV0IGNhcmRTZWN0aW9uO1xyXG5cclxubGV0IHVzZXJJZDtcclxuXHJcbmZ1bmN0aW9uIHNldFVzZXJJbmZvKCkge1xyXG4gICAgYXBpLmdldFVzZXJJbmZvKClcclxuICAgICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgdXNlclByb2ZpbGUuc2V0VXNlckluZm8oW2RhdGEubmFtZSwgZGF0YS5hYm91dCwgZGF0YS5hdmF0YXJdKTtcclxuICAgICAgICAgICAgdXNlcklkID0gZGF0YS5faWQ7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGFwaS5nZXRDYXJkc0Zyb21TZXJ2ZXIoKVxyXG4gICAgICAgICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oeyBpdGVtczogZGF0YSwgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcclxuICAgICAgICAgICAgICAgIH19LCAnLnBsYWNlcycpO1xyXG4gICAgICAgICAgICAgICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG59XHJcblxyXG5zZXRVc2VySW5mbygpO1xyXG5cclxuXHJcblxyXG4vLyDQo9GB0YLQsNC90L7QstC60LAg0YHQu9GD0YjQsNGC0LXQu9C10LlcclxuXHJcbnBob3RvVmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5uZXdQbGFjZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbmZpcm1hdGlvblBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbm5ld0F2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblByb2ZpbGVQb3B1cCk7XHJcbnBob3RvQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3Blbk5ld1BsYWNlUG9wdXApO1xyXG5hdmF0YXJFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3Blbk5ld0F2YXRhclBvcHVwKTtcclxuXHJcblxyXG4vLyDQlNC+0LHQsNCy0LvQtdC90LjQtSDQstCw0LvQuNC00LDRhtC40LhcclxuXHJcbiBwb3B1cEFkZFBsYWNlVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiBwb3B1cEVkaXRQcm9maWxlVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiBwb3B1cE5ld0F2YXRhclZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8g0J7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0L7QslxyXG5cclxuZnVuY3Rpb24gb3BlblByb2ZpbGVQb3B1cCgpIHtcclxuICAgIGxldCBwcm9maWxlSW5mbyA9IHVzZXJQcm9maWxlLmdldFVzZXJJbmZvKCk7XHJcbiAgICB1c2VyTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZUluZm8ubmFtZTtcclxuICAgIHVzZXJEZXNjSW5wdXQudmFsdWUgPSBwcm9maWxlSW5mby5hYm91dDtcclxuICAgIHBvcHVwRWRpdFByb2ZpbGVWYWxpZGF0aW9uLmhpZGVFcnJvck1lc3NhZ2UodXNlck5hbWVJbnB1dCk7XHJcbiAgICBwb3B1cEVkaXRQcm9maWxlVmFsaWRhdGlvbi5oaWRlRXJyb3JNZXNzYWdlKHVzZXJEZXNjSW5wdXQpO1xyXG4gICAgcG9wdXBFZGl0UHJvZmlsZVZhbGlkYXRpb24udG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbiAgICBcclxufTtcclxuXHJcbmZ1bmN0aW9uIG9wZW5OZXdQbGFjZVBvcHVwKCl7XHJcbiAgICBwb3B1cEFkZFBsYWNlVmFsaWRhdGlvbi5oaWRlRXJyb3JNZXNzYWdlKHBsYWNlTmFtZUlucHV0KTtcclxuICAgIHBvcHVwQWRkUGxhY2VWYWxpZGF0aW9uLmhpZGVFcnJvck1lc3NhZ2UocGxhY2VMaW5rSW5wdXQpO1xyXG4gICAgcG9wdXBBZGRQbGFjZVZhbGlkYXRpb24udG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIG5ld1BsYWNlUG9wdXAub3BlbigpO1xyXG59O1xyXG5cclxuY29uc3Qgb3BlblBob3RvUG9wdXAgPSAocGhvdG9OYW1lLCBwaG90b0xpbmspID0+IHtcclxuICAgIHBob3RvVmlld1BvcHVwLm9wZW4ocGhvdG9OYW1lLCBwaG90b0xpbmspO1xyXG59O1xyXG5cclxuY29uc3Qgb3BlbkNvbmZpcm1hdGlvblBvcHVwID0gKGNvbmZpcm1lZEFjdGlvbikgPT4ge1xyXG4gICAgY29uZmlybWF0aW9uUG9wdXAuY29uZmlybWVkQWN0aW9uID0gY29uZmlybWVkQWN0aW9uO1xyXG4gICAgY29uZmlybWF0aW9uUG9wdXAub3BlbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuTmV3QXZhdGFyUG9wdXAoKSB7XHJcbiAgICBwb3B1cE5ld0F2YXRhclZhbGlkYXRpb24uaGlkZUVycm9yTWVzc2FnZShhdmF0YXJMaW5rSW5wdXQpO1xyXG4gICAgcG9wdXBOZXdBdmF0YXJWYWxpZGF0aW9uLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICBuZXdBdmF0YXJQb3B1cC5vcGVuKCk7XHJcbn1cclxuXHJcblxyXG5cclxuLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0LrQsNGA0YLQvtGH0LXQulxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmRJbmZvKSB7XHJcbiAgICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoY2FyZEluZm8sICcjcGxhY2UtdGVtcGxhdGUnLCBvcGVuUGhvdG9Qb3B1cCwgb3BlbkNvbmZpcm1hdGlvblBvcHVwLCBsaWtlQ2FyZCwgZGlzbGlrZUNhcmQpO1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXdDYXJkLmNyZWF0ZUNhcmQodXNlcklkKTtcclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuLy8g0JvQsNC50LrQuFxyXG5jb25zdCBsaWtlQ2FyZCA9IChjYXJkSWQpID0+IHtcclxuICAgIHJldHVybiBhcGkubGlrZUNhcmQoY2FyZElkKTtcclxufVxyXG5cclxuY29uc3QgZGlzbGlrZUNhcmQgPSAoY2FyZElkKSA9PiB7XHJcbiAgICByZXR1cm4gYXBpLmRpc2xpa2VDYXJkKGNhcmRJZCk7XHJcbn1cclxuXHJcbi8vINCX0LDQs9GA0YPQt9C60LBcclxuZnVuY3Rpb24gcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcsIGJ1dHRvbkVsZW1lbnQpIHtcclxuICAgIGJ1dHRvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBpc0xvYWRpbmcgPyBcItCh0L7RhdGA0LDQvdC10L3QuNC14oCmXCIgOiBcItCh0L7RhdGA0LDQvdC40YLRjFwiO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicCIsIkNhcmQiLCJjYXJkIiwidGVtcGxhdGVTZWxlY3RvciIsIm9wZW5QaG90b1BvcHVwRnVuY3Rpb24iLCJvcGVuQ29uZmlybWF0aW9uUG9wdXBGdW5jdGlvbiIsImxpa2VDYXJkRnVuY3Rpb24iLCJkaXNsaWtlQ2FyZEZ1bmN0aW9uIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkSWQiLCJfaWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX3VzZXJzTGlrZWQiLCJsaWtlcyIsIl9udW1iZXJPZkxpa2VzIiwibGVuZ3RoIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfb3BlbkltYWdlUG9wdXAiLCJfb3BlbkNvbmZpcm1hdGlvblBvcHVwIiwiX2xpa2VDYXJkIiwiX2Rpc2xpa2VDYXJkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwidGhlbiIsImRhdGEiLCJyZW1vdmUiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ0ZXh0Q29udGVudCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImFkZCIsImlkIiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdG9nZ2xlQWN0aXZlTGlrZSIsIl9kZWxldGVCdXR0b24iLCJfZGVsZXRlQ2FyZCIsIl9wbGFjZXBpYyIsInVzZXJJZCIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX3BsYWNlIiwiX2xpa2VzQ291bnRlciIsInNldEF0dHJpYnV0ZSIsImZvckVhY2giLCJ1c2VyIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZm9ybVZhbGlkYXRvciIsInNlbGVjdG9ycyIsImZvcm1FbGVtZW50IiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9pbnZhbGlkSW5wdXRDbGFzcyIsImludmFsaWRJbnB1dENsYXNzIiwiX2J1dHRvblNlbGVjdG9yIiwiYnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfYWN0aXZlRXJyb3JDbGFzcyIsImFjdGl2ZUVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfYnV0dG9uRWxlbWVudCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dExpc3QiLCJzb21lIiwiZWxlbSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2dldElucHV0TGlzdCIsInJlbW92ZUF0dHJpYnV0ZSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImhpZGVFcnJvck1lc3NhZ2UiLCJfc2hvd0Vycm9yTWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2lucHV0TGlzdCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImJ1dHRvbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJjbG9zZSIsIlBvcHVwV2l0aEltYWdlIiwiX3Bob3RvRWxlbWVudCIsIl90aXRsZUVsZW1lbnQiLCJwaG90b05hbWUiLCJwaG90b0xpbmsiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0RnVuY3Rpb24iLCJfc3VibWl0RnVuY3Rpb24iLCJfcG9wdXBGb3JtIiwiaW5wdXRWYWx1ZXMiLCJpIiwidmFsdWUiLCJyZXNldCIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImNvbmZpcm1lZEFjdGlvbiIsIl9leGVjdXRlQ29uZmlybWVkQWN0aW9uIiwiZXhlY3V0ZUNvbmZpcm1lZEFjdGlvbiIsImFjdGlvbiIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJEZXNjcmlwdGlvblNlbGVjdG9yIiwidXNlckF2YXRhclNlbGVjdG9yIiwiX3VzZXJOYW1lRWxlbWVudCIsIl91c2VyRGVzY3JpcHRpb25FbGVtZW50IiwiX3VzZXJBdmF0YXJFbGVtZW50IiwiYWJvdXQiLCJ1c2VyTmFtZSIsInVzZXJEZXNjcmlwdGlvbiIsInVzZXJBdmF0YXJMaW5rIiwic3R5bGUiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIkFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfdG9rZW4iLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsIl9jb2hvcnQiLCJmZXRjaCIsInJlcyIsIl9nZXRSZXNwb25zZURhdGEiLCJuZXdVc2VyTmFtZSIsIm5ld1VzZXJEZXNjcmlwdGlvbiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmV3Q2FyZCIsImNhcmRJZCIsIm5ld0F2YXRhckxpbmsiLCJhdmF0YXIiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwidXNlck5hbWVJbnB1dCIsInVzZXJEZXNjSW5wdXQiLCJwbGFjZU5hbWVJbnB1dCIsInBsYWNlTGlua0lucHV0IiwiYXZhdGFyTGlua0lucHV0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJwaG90b0FkZEJ1dHRvbiIsImF2YXRhckVkaXRCdXR0b24iLCJjYXJkU2VjdGlvbiIsImFwaSIsInBvcHVwQWRkUGxhY2VWYWxpZGF0aW9uIiwicG9wdXBFZGl0UHJvZmlsZVZhbGlkYXRpb24iLCJwb3B1cE5ld0F2YXRhclZhbGlkYXRpb24iLCJ1c2VyUHJvZmlsZSIsInBob3RvVmlld1BvcHVwIiwicHJvZmlsZVBvcHVwIiwicmVuZGVyTG9hZGluZyIsImdldElucHV0VmFsdWVzIiwiZWRpdFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJuZXdQbGFjZVBvcHVwIiwibmV3UGxhY2VJbnB1dHMiLCJhZGRlZENhcmQiLCJwb3N0TmV3Q2FyZCIsInJlbmRlckl0ZW1zIiwibmV3QXZhdGFyUG9wdXAiLCJuZXdMaW5rIiwidXBkYXRlQXZhdGFyIiwiY29uZmlybWF0aW9uUG9wdXAiLCJnZXRVc2VySW5mbyIsImdldENhcmRzRnJvbVNlcnZlciIsImFkZEl0ZW0iLCJvcGVuUGhvdG9Qb3B1cCIsIm9wZW5Db25maXJtYXRpb25Qb3B1cCIsImxpa2VDYXJkIiwiZGlzbGlrZUNhcmQiLCJjcmVhdGVDYXJkIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwcm9maWxlSW5mbyIsIm9wZW4iLCJlbmFibGVWYWxpZGF0aW9uIiwiaXNMb2FkaW5nIiwiYnV0dG9uRWxlbWVudCJdLCJzb3VyY2VSb290IjoiIn0=